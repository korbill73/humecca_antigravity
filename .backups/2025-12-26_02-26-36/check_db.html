<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Check DB</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
    <h2>Database Check</h2>
    <button onclick="check()">Check Products</button>
    <div id="log" style="white-space: pre-wrap; font-family: monospace;"></div>

    <script>
        const log = (msg) => document.getElementById('log').innerText += msg + '\n';

        const _url = 'https://pfowkwodqsirbaqkpfmb.supabase.co';
        const _key = 'sb_publishable_i8wY_NmKlt9qUZJPKH1f2A_yOwp3qlA';
        const supabase = window.supabase.createClient(_url, _key);

        async function check() {
            log('Fetching products...');
            const { data, error } = await supabase.from('products').select('*');
            if (error) {
                log('Error: ' + error.message);
                return;
            }
            log(`Found ${data.length} products:`);
            data.forEach(p => {
                log(`[${p.id}] ${p.category} / ${p.subcategory} : ${p.name}`);
            });
        }

        // Auto run
        setTimeout(check, 1000);
    </script>
</body>

</html>