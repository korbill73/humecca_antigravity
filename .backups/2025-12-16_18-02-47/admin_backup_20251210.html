<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HUMECCA 관리자</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f7fa;
            color: #333;
        }

        .admin-header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 20px 40px;
        }

        .admin-header h1 {
            font-size: 20px;
            font-weight: 600;
            color: #1a1a2e;
        }

        .admin-tabs {
            display: flex;
            gap: 0;
            margin-top: 20px;
            border-bottom: 1px solid #e5e7eb;
        }

        .admin-tab {
            padding: 12px 24px;
            background: none;
            border: none;
            color: #64748b;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
        }

        .admin-tab:hover {
            color: #1a1a2e;
            background: #f8f9fa;
        }

        .admin-tab.active {
            color: #EF4444;
            font-weight: 600;
        }

        .admin-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background: #EF4444;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: #1a1a2e;
            margin-bottom: 8px;
        }

        .page-subtitle {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a2e;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #EF4444;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn-primary {
            background: #EF4444;
            color: white;
        }

        .btn-primary:hover {
            background: #DC2626;
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #64748b;
        }

        .btn-secondary:hover {
            background: #e2e8f0;
        }

        .btn-dark {
            background: #1e293b;
            color: white;
        }

        .btn-dark:hover {
            background: #0f172a;
        }

        /* Customer Grid */
        .customer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 24px;
        }

        .customer-card {
            background: #f8f9fa;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            position: relative;
            transition: all 0.3s;
        }

        .customer-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-color: #EF4444;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 4px;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 12px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .alert {
            padding: 14px 18px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #6ee7b7;
        }

        .alert-info {
            background: #eff6ff;
            color: #1e3a8a;
            border: 1px solid #bfdbfe;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #64748b;
            text-decoration: none;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .back-link:hover {
            color: #EF4444;
        }

        /* Table Styles for Product List */
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .admin-table th {
            text-align: left;
            padding: 12px 16px;
            background: #f8f9fa;
            border-bottom: 2px solid #e5e7eb;
            color: #64748b;
            font-weight: 600;
        }

        .admin-table td {
            padding: 16px;
            border-bottom: 1px solid #f1f5f9;
            color: #333;
            vertical-align: middle;
        }

        .admin-table tr:hover {
            background-color: #f8fafc;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-blue {
            background: #dbeafe;
            color: #2563eb;
        }

        .badge-green {
            background: #dcfce7;
            color: #166534;
        }

        .badge-gray {
            background: #f1f5f9;
            color: #64748b;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 16px;
        }

        /* Modal Overlay for Export */
        #export-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-box {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>

<body>
    <div class="admin-header">
        <h1>HUMECCA 관리자</h1>
        <div class="admin-tabs">
            <button class="admin-tab" onclick="showTab('notice')">공지사항</button>
            <button class="admin-tab" onclick="showTab('faq')">FAQ</button>
            <button class="admin-tab" onclick="showTab('inquiry')">문의 관리</button>
            <button class="admin-tab" onclick="showTab('ticket')">티켓 관리</button>
            <button class="admin-tab active" onclick="showTab('product')">상품 관리</button>
            <button class="admin-tab" onclick="showTab('history')">회사 연혁</button>
            <button class="admin-tab" onclick="showTab('customer')">고객사 로고</button>
            <button class="admin-tab" onclick="showTab('webhook')">웹훅로닉스</button>
            <button class="admin-tab" onclick="showTab('terms')">약관 관리</button>
            <button class="admin-tab" onclick="showTab('contact')">연락 관리</button>
        </div>
    </div>

    <div class="container">

        <!-- ======================= 상품 관리 탭 ======================= -->
        <div id="tab-product" class="tab-content active">
            <h2 class="page-title">상품 관리</h2>
            <p class="page-subtitle">호스팅, VPN, 코로케이션 등 다양한 상품을 통합 관리합니다.</p>

            <a href="index.html" class="back-link"><i class="fas fa-arrow-left"></i> 홈페이지로 돌아가기</a>

            <div id="product-alert-container"></div>

            <!-- 하위 탭 -->
            <div class="admin-tabs" style="margin-top: 0; margin-bottom: 24px; border-bottom: none; gap: 10px;">
                <button type="button" class="btn btn-dark" onclick="showProductSub('hosting')" id="btn-sub-hosting">서버
                    호스팅</button>
                <button type="button" class="btn btn-secondary" onclick="showProductSub('vpn')" id="btn-sub-vpn">VPN
                    전용선</button>
                <button type="button" class="btn btn-secondary" onclick="showProductSub('colocation')"
                    id="btn-sub-colocation">코로케이션</button>
                <button type="button" class="btn btn-secondary" onclick="showProductSub('service')"
                    id="btn-sub-service">부가서비스/보안</button>
            </div>

            <!-- 1. 서버 호스팅 관리 섹션 -->
            <div id="sub-hosting" class="sub-content">
                <!-- 등록/수정 폼 -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" id="h-form-title">호스팅 상품 등록</h3>
                        <button type="button" class="btn btn-secondary" onclick="resetHostingForm()" id="h-btn-reset"
                            style="display:none;">
                            <i class="fas fa-undo"></i> 초기화 (새 상품 등록)
                        </button>
                    </div>
                    <form id="hosting-form">
                        <input type="hidden" id="h-edit-index" value="">

                        <div class="grid-2">
                            <div class="form-group">
                                <label class="form-label">상품명</label>
                                <input type="text" id="h-name" class="form-input" placeholder="예: 비즈니스" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">고유 ID (영문/숫자)</label>
                                <input type="text" id="h-id" class="form-input" placeholder="예: biz_01" required>
                            </div>
                        </div>

                        <div class="grid-2">
                            <div class="form-group">
                                <label class="form-label">가격 (숫자, 콤마 포함)</label>
                                <input type="text" id="h-price" class="form-input" placeholder="예: 199,000" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">기간/단위</label>
                                <select id="h-period" class="form-input">
                                    <option value="월">월 (Month)</option>
                                    <option value="년">년 (Year)</option>
                                    <option value="건">건 (One-time)</option>
                                </select>
                            </div>
                        </div>

                        <div class="grid-2">
                            <div class="form-group">
                                <label class="form-label">뱃지 라벨 (선택)</label>
                                <input type="text" id="h-badge" class="form-input" placeholder="예: BEST, NEW">
                            </div>
                            <div class="form-group">
                                <label class="form-label">한줄 요약 (설명)</label>
                                <input type="text" id="h-summary" class="form-input" placeholder="상품에 대한 짧은 설명">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">스펙 상세 (CPU / RAM / Storage / Traffic)</label>
                            <div class="grid-4">
                                <input type="text" id="h-cpu" class="form-input" placeholder="CPU">
                                <input type="text" id="h-ram" class="form-input" placeholder="RAM">
                                <input type="text" id="h-storage" class="form-input" placeholder="Storage">
                                <input type="text" id="h-traffic" class="form-input" placeholder="Traffic">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">주요 기능 목록 (엔터로 줄바꿈 구분)</label>
                            <textarea id="h-features" class="form-input" style="height: 100px; resize: vertical;"
                                placeholder="기능 1&#13;&#10;기능 2&#13;&#10;기능 3"></textarea>
                        </div>

                        <div class="grid-4" style="align-items: center; margin-bottom: 20px;">
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="h-active" checked> 판매중 (활성)
                            </label>
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="h-popular"> 인기상품 강조
                            </label>
                            <div>
                                <label class="form-label" style="display:inline; margin-right:8px;">정렬 순서</label>
                                <input type="number" id="h-order" class="form-input"
                                    style="width: 80px; display:inline-block;" value="1">
                            </div>
                        </div>

                        <div style="text-align: right;">
                            <button type="submit" class="btn btn-primary" id="h-btn-submit">
                                <i class="fas fa-plus"></i> 상품 등록하기
                            </button>
                        </div>
                    </form>
                </div>

                <!-- 목록 Card -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">서버 호스팅 목록</h3>
                        <button type="button" class="btn btn-dark" onclick="exportData('hosting')">
                            <i class="fas fa-file-download"></i> 데이터 적용 (파일 저장)
                        </button>
                    </div>

                    <div style="overflow-x: auto;">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th width="50">#</th>
                                    <th>상품명</th>
                                    <th>가격</th>
                                    <th>스펙 요약</th>
                                    <th>상태</th>
                                    <th width="100">관리</th>
                                </tr>
                            </thead>
                            <tbody id="hosting-list-body">
                                <!-- JS Rendered -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div> <!-- End Hosting Sub -->


            <!-- 2. VPN 전용선 관리 섹션 -->
            <div id="sub-vpn" class="sub-content" style="display:none;">
                <!-- 등록/수정 폼 -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" id="v-form-title">VPN 상품 등록</h3>
                        <button type="button" class="btn btn-secondary" onclick="resetVpnForm()" id="v-btn-reset"
                            style="display:none;">
                            <i class="fas fa-undo"></i> 초기화 (새 상품 등록)
                        </button>
                    </div>
                    <form id="vpn-form">
                        <input type="hidden" id="v-edit-index" value="">

                        <div class="grid-2">
                            <div class="form-group">
                                <label class="form-label">상품명</label>
                                <input type="text" id="v-name" class="form-input" placeholder="예: 스탠다드" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">고유 ID</label>
                                <input type="text" id="v-id" class="form-input" placeholder="예: vpn-std" required>
                            </div>
                        </div>

                        <div class="grid-2">
                            <div class="form-group">
                                <label class="form-label">가격 (숫자, 콤마 포함)</label>
                                <input type="text" id="v-price" class="form-input" placeholder="예: 500,000" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">기간/단위</label>
                                <select id="v-period" class="form-input">
                                    <option value="월">월 (Month)</option>
                                    <option value="년">년 (Year)</option>
                                    <option value="건">건 (One-time)</option>
                                </select>
                            </div>
                        </div>

                        <div class="grid-2">
                            <div class="form-group">
                                <label class="form-label">뱃지 라벨 (선택)</label>
                                <input type="text" id="v-badge" class="form-input" placeholder="예: BEST CHOICE">
                            </div>
                            <div class="form-group">
                                <label class="form-label">한줄 요약</label>
                                <input type="text" id="v-summary" class="form-input" placeholder="예: 중견기업을 위한 고성능 VPN">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">VPN 스펙 (속도 / 거점 / 사용자)</label>
                            <div class="grid-4" style="grid-template-columns: 1fr 1fr 1fr;">
                                <input type="text" id="v-speed" class="form-input" placeholder="예: 100Mbps">
                                <input type="text" id="v-sites" class="form-input" placeholder="예: 5개 거점">
                                <input type="text" id="v-users" class="form-input" placeholder="예: 50 사용자">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">주요 기능 목록 (엔터로 줄바꿈 구분)</label>
                            <textarea id="v-features" class="form-input" style="height: 100px; resize: vertical;"
                                placeholder="기능 1&#13;&#10;기능 2&#13;&#10;기능 3"></textarea>
                        </div>

                        <div class="grid-4" style="align-items: center; margin-bottom: 20px;">
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="v-active" checked> 판매중 (활성)
                            </label>
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="v-popular"> 인기상품 강조
                            </label>
                            <div>
                                <label class="form-label" style="display:inline; margin-right:8px;">정렬 순서</label>
                                <input type="number" id="v-order" class="form-input"
                                    style="width: 80px; display:inline-block;" value="1">
                            </div>
                        </div>

                        <div style="text-align: right;">
                            <button type="submit" class="btn btn-primary" id="v-btn-submit">
                                <i class="fas fa-plus"></i> 상품 등록하기
                            </button>
                        </div>
                    </form>
                </div>

                <!-- 목록 Card -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">VPN 상품 목록</h3>
                        <button type="button" class="btn btn-dark" onclick="exportData('vpn')">
                            <i class="fas fa-file-download"></i> 데이터 적용 (파일 저장)
                        </button>
                    </div>

                    <div style="overflow-x: auto;">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th width="50">#</th>
                                    <th>상품명</th>
                                    <th>가격</th>
                                    <th>스펙 요약</th>
                                    <th>상태</th>
                                    <th width="100">관리</th>
                                </tr>
                            </thead>
                            <tbody id="vpn-list-body">
                                <!-- JS Rendered -->
                            </tbody>
                        </table>
                    </div>
                    <div class="alert alert-info" style="margin-top: 20px;">
                        <i class="fas fa-info-circle"></i>
                        <span>목록을 수정한 후에는 반드시 상단의 <strong>[데이터 적용]</strong> 버튼을 눌러 <code>vpn_data.js</code> 파일을 다운로드 및
                            덮어쓰기 해야 홈페이지에 반영됩니다.</span>
                    </div>
                </div>
            </div><!-- End VPN Sub -->


            <div id="sub-colocation" class="sub-content" style="display:none;">
                <div class="card">
                    <h3 class="card-title">코로케이션 관리</h3>
                    <p style="margin-top: 10px; color: #666;">준비중입니다.</p>
                </div>
            </div>
            <div id="sub-service" class="sub-content" style="display:none;">
                <div class="card">
                    <h3 class="card-title">부가서비스 관리</h3>
                    <p style="margin-top: 10px; color: #666;">준비중입니다.</p>
                </div>
            </div>

        </div>

        <!-- ======================= 다른 탭들 (기존 유지) ======================= -->
        <!-- 고객사 로고 탭 -->
        <div id="tab-customer" class="tab-content">
            <h2 class="page-title">고객사 로고</h2>
            <p class="page-subtitle">메인 페이지에 노출될 고객사 로고를 관리합니다.</p>
            <div id="alert-container"></div>
            <!-- 고객사 추가 폼 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" id="form-title">고객사 추가</h3>
                </div>
                <form id="customer-form">
                    <input type="hidden" id="edit-index" value="">
                    <div style="display: grid; grid-template-columns: 1fr 2fr auto auto; gap: 16px; align-items: end;">
                        <div class="form-group" style="margin-bottom: 0;">
                            <label class="form-label">고객사명 *</label>
                            <input type="text" id="customer-name" class="form-input" placeholder="예: 삼성전자" required>
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label class="form-label">로고 URL (선택)</label>
                            <input type="url" id="customer-logo" class="form-input"
                                placeholder="https://example.com/logo.png">
                        </div>
                        <button type="submit" class="btn btn-primary" id="submit-btn">
                            <i class="fas fa-plus"></i> 추가
                        </button>
                        <button type="button" class="btn btn-secondary" id="cancel-btn" style="display: none;"
                            onclick="cancelEdit()">
                            <i class="fas fa-times"></i> 취소
                        </button>
                    </div>
                </form>
            </div>
            <!-- 고객사 목록 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">등록된 고객사 (<span id="customer-count">0</span>개)</h3>
                </div>
                <div id="customer-list" class="customer-grid"></div>
            </div>
        </div>

        <!-- 기타 탭들 -->
        <div id="tab-notice" class="tab-content">
            <h2 class="page-title">공지사항</h2>
            <p class="page-subtitle">준비중입니다.</p>
        </div>
        <div id="tab-faq" class="tab-content">
            <h2 class="page-title">FAQ</h2>
            <p class="page-subtitle">준비중입니다.</p>
        </div>
        <div id="tab-inquiry" class="tab-content">
            <h2 class="page-title">문의 관리</h2>
            <p class="page-subtitle">준비중입니다.</p>
        </div>
        <div id="tab-ticket" class="tab-content">
            <h2 class="page-title">티켓 관리</h2>
            <p class="page-subtitle">준비중입니다.</p>
        </div>
        <div id="tab-webhook" class="tab-content">
            <h2 class="page-title">웹크루닉스</h2>
            <p class="page-subtitle">준비중입니다.</p>
        </div>
        <!-- 약관 관리 -->
        <div id="tab-terms" class="tab-content">
            <h2 class="page-title">약관 관리</h2>
            <p class="page-subtitle">홈페이지 하단에 노출되는 약관 내용을 관리합니다.</p>
            <div id="term-alert-container"></div>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">이용약관 및 정책 수정</h3>
                </div>
                <div class="form-group">
                    <label class="form-label">약관 선택</label>
                    <div class="admin-tabs" style="margin-top: 0; margin-bottom: 20px; border-bottom: none; gap: 10px;">
                        <button type="button" class="btn btn-secondary" onclick="loadTermEditor('privacy')"
                            id="btn-privacy">개인정보처리방침</button>
                        <button type="button" class="btn btn-secondary" onclick="loadTermEditor('terms')"
                            id="btn-terms">이용약관</button>
                        <button type="button" class="btn btn-secondary" onclick="loadTermEditor('member')"
                            id="btn-member">회원약관</button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" id="editor-label">내용 편집 (텍스트 입력)</label>
                    <textarea id="term-content" class="form-input"
                        style="min-height: 400px; font-family: monospace; line-height: 1.5;"
                        placeholder="약관 내용을 입력하세요..."></textarea>
                </div>
                <div style="text-align: right; display: flex; justify-content: flex-end; gap: 10px;">
                    <button type="button" class="btn btn-secondary" onclick="resetTermToDefault()"
                        style="background: #efefef; color: #333;">
                        <i class="fas fa-undo"></i> 기본값 불러오기
                    </button>
                    <button type="button" class="btn btn-primary" onclick="saveCurrentTerm()">
                        <i class="fas fa-save"></i> 저장하기
                    </button>
                </div>
            </div>
            <div style="background: #f0f9ff; padding: 20px; border-radius: 8px; margin-top: 20px;">
                <h4><i class="fas fa-info-circle"></i> 안내</h4>
                <p style="margin-top: 10px; font-size: 14px; color: #64748b;">
                    여기서 저장한 내용은 LocalStorage에 저장됩니다. (실제 배포 시 백엔드 연동 필요)
                </p>
            </div>
        </div>

        <!-- ======================= 회사 연혁 관리 탭 ======================= -->
        <div id="tab-history" class="tab-content">
            <h2 class="page-title">회사 연혁 관리</h2>
            <p class="page-subtitle">회사 역사 및 주요 이벤트를 연도별로 관리합니다.</p>

            <div id="history-alert-container"></div>

            <!-- 연혁 등록 폼 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" id="history-form-title">연혁 추가</h3>
                </div>
                <form id="history-form">
                    <input type="hidden" id="history-edit-id" value="">

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div class="form-group">
                            <label>연도 *</label>
                            <input type="number" id="history-year" class="form-control" placeholder="예: 2025" min="1900"
                                max="2100" required>
                        </div>
                        <div class="form-group">
                            <label>월 (선택)</label>
                            <select id="history-month" class="form-control">
                                <option value="">연도만</option>
                                <option value="1">1월</option>
                                <option value="2">2월</option>
                                <option value="3">3월</option>
                                <option value="4">4월</option>
                                <option value="5">5월</option>
                                <option value="6">6월</option>
                                <option value="7">7월</option>
                                <option value="8">8월</option>
                                <option value="9">9월</option>
                                <option value="10">10월</option>
                                <option value="11">11월</option>
                                <option value="12">12월</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>제목 *</label>
                        <input type="text" id="history-title" class="form-control" placeholder="예: 다날클라우드 서비스 제공"
                            required>
                    </div>

                    <div class="form-group">
                        <label>설명</label>
                        <textarea id="history-description" class="form-control" rows="3"
                            placeholder="상세 설명을 입력하세요 (선택사항)"></textarea>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label>정렬 순서</label>
                            <input type="number" id="history-sort" class="form-control" value="1" min="1">
                            <small style="color: #999;">같은 연도/월 내에서의 순서</small>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="history-active" checked>
                                활성화
                            </label>
                        </div>
                    </div>

                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button type="submit" class="btn btn-primary" id="history-submit-btn">
                            <i class="fas fa-plus"></i> 추가
                        </button>
                        <button type="button" class="btn btn-secondary" id="history-cancel-btn"
                            onclick="resetHistoryForm()" style="display: none;">
                            <i class="fas fa-times"></i> 취소
                        </button>
                    </div>
                </form>
            </div>

            <!-- 연혁 목록 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">등록된 연혁 (<span id="history-count">0</span>)</h3>
                    <button class="btn btn-secondary" onclick="refreshHistoryList()">
                        <i class="fas fa-sync"></i> 새로고침
                    </button>
                </div>
                <div id="history-list" style="min-height: 200px;"></div>
            </div>
        </div>

        <div id="tab-contact" class="tab-content">
            <h2 class="page-title">연락 관리</h2>
        </div>

        <!-- ======================= FAQ 관리 탭 ======================= -->
        <div id="tab-faq" class="tab-content">
            <h2 class="page-title">FAQ 관리</h2>
            <p class="page-subtitle">자주 묻는 질문을 카테고리별로 관리합니다.</p>

            <div id="faq-alert-container"></div>

            <!-- FAQ 등록 폼 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" id="faq-form-title">FAQ 추가</h3>
                </div>
                <form id="faq-form">
                    <input type="hidden" id="faq-edit-id" value="">

                    <div class="form-group">
                        <label>카테고리</label>
                        <select id="faq-category" class="form-control">
                            <option value="general">일반</option>
                            <option value="technical">기술</option>
                            <option value="billing">요금</option>
                            <option value="service">서비스</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>질문 *</label>
                        <input type="text" id="faq-question" class="form-control" placeholder="자주 묻는 질문을 입력하세요"
                            required>
                    </div>

                    <div class="form-group">
                        <label>답변 *</label>
                        <textarea id="faq-answer" class="form-control" rows="5" placeholder="답변 내용을 입력하세요"
                            required></textarea>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label>정렬 순서</label>
                            <input type="number" id="faq-sort" class="form-control" value="1" min="1">
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="faq-active" checked>
                                활성화
                            </label>
                        </div>
                    </div>

                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button type="submit" class="btn btn-primary" id="faq-submit-btn">
                            <i class="fas fa-plus"></i> 추가
                        </button>
                        <button type="button" class="btn btn-secondary" id="faq-cancel-btn" onclick="resetFaqForm()"
                            style="display: none;">
                            <i class="fas fa-times"></i> 취소
                        </button>
                    </div>
                </form>
            </div>

            <!-- FAQ 목록 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">등록된 FAQ (<span id="faq-count">0</span>)</h3>
                    <button class="btn btn-secondary" onclick="refreshFaqList()">
                        <i class="fas fa-sync"></i> 새로고침
                    </button>
                </div>
                <div id="faq-list" style="min-height: 200px;"></div>
            </div>
        </div>

        <!-- ======================= 공지사항 관리 탭 ======================= -->
        <div id="tab-notice" class="tab-content">
            <h2 class="page-title">공지사항 관리</h2>
            <p class="page-subtitle">사이트의 공지사항을 관리합니다.</p>

            <div id="notice-alert-container"></div>

            <!-- 공지사항 등록 폼 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" id="notice-form-title">공지사항 작성</h3>
                </div>
                <form id="notice-form">
                    <input type="hidden" id="notice-edit-id" value="">

                    <div class="form-group">
                        <label>제목 *</label>
                        <input type="text" id="notice-title" class="form-control" placeholder="공지사항 제목을 입력하세요" required>
                    </div>

                    <div class="form-group">
                        <label>내용 *</label>
                        <textarea id="notice-content" class="form-control" rows="10"
                            placeholder="공지사항 내용을 입력하세요 (HTML 사용 가능)" required></textarea>
                        <small style="color: #999;">HTML 태그를 사용할 수 있습니다.</small>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label>작성자</label>
                            <input type="text" id="notice-author" class="form-control" value="HUMECCA"
                                placeholder="관리자">
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="notice-pinned">
                                상단 고정
                            </label>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="notice-active" checked>
                                활성화
                            </label>
                        </div>
                    </div>

                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button type="submit" class="btn btn-primary" id="notice-submit-btn">
                            <i class="fas fa-plus"></i> 작성
                        </button>
                        <button type="button" class="btn btn-secondary" id="notice-cancel-btn"
                            onclick="resetNoticeForm()" style="display: none;">
                            <i class="fas fa-times"></i> 취소
                        </button>
                    </div>
                </form>
            </div>

            <!-- 공지사항 목록 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">공지사항 목록 (<span id="notice-count">0</span>)</h3>
                    <button class="btn btn-secondary" onclick="refreshNoticeList()">
                        <i class="fas fa-sync"></i> 새로고침
                    </button>
                </div>
                <div id="notice-list" style="min-height: 200px;"></div>
            </div>
        </div>

        <!-- ======================= 문의 관리 탭 ======================= -->
        <div id="tab-inquiry" class="tab-content">
            <h2 class="page-title">문의 관리</h2>
            <p class="page-subtitle">고객 문의를 확인하고 답변합니다.</p>

            <div id="inquiry-alert-container"></div>

            <!-- 필터 -->
            <div class="card">
                <div style="display: flex; gap: 15px; align-items: center;">
                    <label style="font-weight: 600;">상태 필터:</label>
                    <select id="inquiry-filter" class="form-control" style="width: 200px;"
                        onchange="refreshInquiryList()">
                        <option value="all">전체</option>
                        <option value="pending">답변 대기</option>
                        <option value="replied">답변 완료</option>
                        <option value="closed">종료</option>
                    </select>
                    <button class="btn btn-secondary" onclick="refreshInquiryList()">
                        <i class="fas fa-sync"></i> 새로고침
                    </button>
                </div>
            </div>

            <!-- 문의 목록 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">문의 목록 (<span id="inquiry-count">0</span>)</h3>
                </div>
                <div id="inquiry-list" style="min-height: 200px;"></div>
            </div>
        </div>

        <div id="tab-contact" class="tab-content">
            <div id="export-overlay">
                <div class="modal-box">
                    <div class="card-header"
                        style="border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 15px;">
                        <h3 class="card-title" id="export-title">데이터 파일 다운로드</h3>
                        <button onclick="document.getElementById('export-overlay').style.display='none'"
                            style="border:none; background:none; cursor:pointer;"><i class="fas fa-times"
                                style="font-size: 20px; color: #999;"></i></button>
                    </div>
                    <p style="color: #666; font-size: 14px; margin-bottom: 15px;">
                        아래 버튼을 눌러 <strong id="export-filename">data.js</strong> 파일을 다운로드하세요.<br>
                        다운로드한 파일을 프로젝트의 <code>js/</code> 폴더에 덮어쓰기 하시면 적용됩니다.
                    </p>
                    <textarea id="export-code"
                        style="width: 100%; height: 100px; background: #f8f9fa; border: 1px solid #ddd; padding: 10px; font-size: 12px; margin-bottom: 15px; display:none;"></textarea>

                    <button onclick="downloadJS()" class="btn btn-primary"
                        style="width: 100%; justify-content: center; padding: 15px;">
                        <i class="fas fa-download"></i> <span id="export-btn-text">Download</span>
                    </button>
                </div>
            </div>


            <script src="js/hosting_data.js"></script>
            <script src="js/vpn_data.js"></script>
            <script src="terms_data.js?v=3.18"></script>

            <script>
                /* ================== General Admin Logic ================== */
                function showTab(tabName) {
                    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                    document.querySelectorAll('.admin-tab').forEach(btn => btn.classList.remove('active'));

                    // Manage Active States
                    const content = document.getElementById('tab-' + tabName);
                    if (content) content.classList.add('active');

                    // Find button by onclick text matching
                    const buttons = document.querySelectorAll('.admin-header .admin-tab');
                    buttons.forEach(btn => {
                        if (btn.getAttribute('onclick').includes(tabName)) btn.classList.add('active');
                    });

                    if (tabName === 'terms') loadTermEditor('privacy');
                }

                /* ================== Product Sub Tab Logic ================== */
                function showProductSub(subName) {
                    document.querySelectorAll('.sub-content').forEach(el => el.style.display = 'none');
                    document.getElementById('sub-' + subName).style.display = 'block';

                    // Button styles
                    ['hosting', 'vpn', 'colocation', 'service'].forEach(name => {
                        const btn = document.getElementById('btn-sub-' + name);
                        if (btn) btn.className = 'btn btn-secondary';
                    });

                    document.getElementById('btn-sub-' + subName).className = 'btn btn-dark';
                }

                /* ================== HOSTING Logic ================== */
                let h_products = [];
                if (typeof hostingProducts !== 'undefined') h_products = hostingProducts;
                if (localStorage.getItem('hostingProducts')) {
                    try { h_products = JSON.parse(localStorage.getItem('hostingProducts')); } catch (e) { }
                }

                function renderHostingProducts() {
                    const tbody = document.getElementById('hosting-list-body');
                    tbody.innerHTML = '';
                    h_products.sort((a, b) => (a.sortOrder || 99) - (b.sortOrder || 99));

                    h_products.forEach((p, index) => {
                        let badgeHtml = '';
                        if (p.badge) badgeHtml = `<span class="badge badge-blue">${p.badge}</span>`;
                        if (p.popular) badgeHtml += ` <i class="fas fa-star" style="color:#f59e0b; font-size:12px;"></i>`;

                        const tr = document.createElement('tr');
                        tr.innerHTML = `
                    <td>${p.sortOrder}</td>
                    <td><div style="font-weight:bold; color:#333;">${p.name} ${badgeHtml}</div><div style="font-size:12px; color:#888;">${p.id}</div></td>
                    <td>₩${p.price} / ${p.period}</td>
                    <td style="font-size:12px;">CPU: ${p.specs?.cpu || '-'}<br>RAM: ${p.specs?.ram || '-'}</td>
                    <td>${p.isActive ? '<span class="badge badge-green">판매중</span>' : '<span class="badge badge-gray">중지</span>'}</td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size:12px;" onclick="editHosting(${index})"><i class="fas fa-edit"></i></button>
                        <button class="delete-btn" onclick="deleteHosting(${index})"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                        tbody.appendChild(tr);
                    });
                    localStorage.setItem('hostingProducts', JSON.stringify(h_products));
                }

                document.getElementById('hosting-form').addEventListener('submit', function (e) {
                    e.preventDefault();
                    const idxVal = document.getElementById('h-edit-index').value;
                    const idx = idxVal === '' ? -1 : parseInt(idxVal);
                    const data = {
                        id: document.getElementById('h-id').value,
                        name: document.getElementById('h-name').value,
                        price: document.getElementById('h-price').value,
                        period: document.getElementById('h-period').value,
                        badge: document.getElementById('h-badge').value,
                        summary: document.getElementById('h-summary').value,
                        isActive: document.getElementById('h-active').checked,
                        popular: document.getElementById('h-popular').checked,
                        sortOrder: parseInt(document.getElementById('h-order').value) || 1,
                        specs: {
                            cpu: document.getElementById('h-cpu').value,
                            ram: document.getElementById('h-ram').value,
                            storage: document.getElementById('h-storage').value,
                            traffic: document.getElementById('h-traffic').value,
                        },
                        features: document.getElementById('h-features').value.split('\n').filter(t => t.trim() !== '')
                    };

                    if (idx === -1) { h_products.push(data); showAlert('상품이 등록되었습니다.'); }
                    else { h_products[idx] = data; showAlert('상품이 수정되었습니다.'); }
                    resetHostingForm(); renderHostingProducts();
                });

                function editHosting(index) {
                    const p = h_products[index];
                    document.getElementById('h-edit-index').value = index;
                    document.getElementById('h-name').value = p.name;
                    document.getElementById('h-id').value = p.id;
                    document.getElementById('h-price').value = p.price;
                    document.getElementById('h-period').value = p.period;
                    document.getElementById('h-badge').value = p.badge;
                    document.getElementById('h-summary').value = p.summary || '';
                    document.getElementById('h-cpu').value = p.specs?.cpu || '';
                    document.getElementById('h-ram').value = p.specs?.ram || '';
                    document.getElementById('h-storage').value = p.specs?.storage || '';
                    document.getElementById('h-traffic').value = p.specs?.traffic || '';
                    document.getElementById('h-features').value = (p.features || []).join('\n');
                    document.getElementById('h-active').checked = p.isActive;
                    document.getElementById('h-popular').checked = p.popular;
                    document.getElementById('h-order').value = p.sortOrder || 1;

                    document.getElementById('h-form-title').innerText = '상품 수정 (' + p.name + ')';
                    document.getElementById('h-btn-submit').innerHTML = '<i class="fas fa-save"></i> 수정사항 저장';
                    document.getElementById('h-btn-reset').style.display = 'inline-flex';
                    document.getElementById('hosting-form').scrollIntoView({ behavior: 'smooth' });
                }

                function deleteHosting(index) {
                    if (confirm('정말 삭제하시겠습니까?')) {
                        h_products.splice(index, 1);
                        renderHostingProducts();
                    }
                }
                function resetHostingForm() {
                    document.getElementById('hosting-form').reset();
                    document.getElementById('h-edit-index').value = '';
                    document.getElementById('h-form-title').innerText = '호스팅 상품 등록';
                    document.getElementById('h-btn-submit').innerHTML = '<i class="fas fa-plus"></i> 상품 등록하기';
                    document.getElementById('h-btn-reset').style.display = 'none';
                }

                /* ================== VPN Logic ================== */
                let v_products = [];
                if (typeof vpnProducts !== 'undefined') v_products = vpnProducts;
                if (localStorage.getItem('vpnProducts')) {
                    try { v_products = JSON.parse(localStorage.getItem('vpnProducts')); } catch (e) { }
                }

                function renderVpnProducts() {
                    const tbody = document.getElementById('vpn-list-body');
                    tbody.innerHTML = '';
                    v_products.sort((a, b) => (a.sortOrder || 99) - (b.sortOrder || 99));

                    v_products.forEach((p, index) => {
                        let badgeHtml = '';
                        if (p.badge) badgeHtml = `<span class="badge badge-blue">${p.badge}</span>`;
                        if (p.popular) badgeHtml += ` <i class="fas fa-star" style="color:#f59e0b; font-size:12px;"></i>`;

                        const tr = document.createElement('tr');
                        tr.innerHTML = `
                    <td>${p.sortOrder}</td>
                    <td><div style="font-weight:bold; color:#333;">${p.name} ${badgeHtml}</div><div style="font-size:12px; color:#888;">${p.id}</div></td>
                    <td>₩${p.price} / ${p.period}</td>
                    <td style="font-size:12px;">속도: ${p.specs?.speed || '-'}<br>거점: ${p.specs?.sites || '-'}</td>
                    <td>${p.isActive ? '<span class="badge badge-green">판매중</span>' : '<span class="badge badge-gray">중지</span>'}</td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size:12px;" onclick="editVpn(${index})"><i class="fas fa-edit"></i></button>
                        <button class="delete-btn" onclick="deleteVpn(${index})"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                        tbody.appendChild(tr);
                    });
                    localStorage.setItem('vpnProducts', JSON.stringify(v_products));
                }

                document.getElementById('vpn-form').addEventListener('submit', function (e) {
                    e.preventDefault();
                    const idxVal = document.getElementById('v-edit-index').value;
                    const idx = idxVal === '' ? -1 : parseInt(idxVal);
                    const data = {
                        id: document.getElementById('v-id').value,
                        name: document.getElementById('v-name').value,
                        price: document.getElementById('v-price').value,
                        period: document.getElementById('v-period').value,
                        badge: document.getElementById('v-badge').value,
                        summary: document.getElementById('v-summary').value,
                        isActive: document.getElementById('v-active').checked,
                        popular: document.getElementById('v-popular').checked,
                        sortOrder: parseInt(document.getElementById('v-order').value) || 1,
                        specs: {
                            speed: document.getElementById('v-speed').value,
                            sites: document.getElementById('v-sites').value,
                            users: document.getElementById('v-users').value
                        },
                        features: document.getElementById('v-features').value.split('\n').filter(t => t.trim() !== '')
                    };

                    if (idx === -1) { v_products.push(data); showAlert('상품이 등록되었습니다.'); }
                    else { v_products[idx] = data; showAlert('상품이 수정되었습니다.'); }
                    resetVpnForm(); renderVpnProducts();
                });

                function editVpn(index) {
                    const p = v_products[index];
                    document.getElementById('v-edit-index').value = index;
                    document.getElementById('v-name').value = p.name;
                    document.getElementById('v-id').value = p.id;
                    document.getElementById('v-price').value = p.price;
                    document.getElementById('v-period').value = p.period;
                    document.getElementById('v-badge').value = p.badge;
                    document.getElementById('v-summary').value = p.summary || '';
                    document.getElementById('v-speed').value = p.specs?.speed || '';
                    document.getElementById('v-sites').value = p.specs?.sites || '';
                    document.getElementById('v-users').value = p.specs?.users || '';
                    document.getElementById('v-features').value = (p.features || []).join('\n');
                    document.getElementById('v-active').checked = p.isActive;
                    document.getElementById('v-popular').checked = p.popular;
                    document.getElementById('v-order').value = p.sortOrder || 1;

                    document.getElementById('v-form-title').innerText = 'VPN 상품 수정';
                    document.getElementById('v-btn-submit').innerHTML = '<i class="fas fa-save"></i> 수정사항 저장';
                    document.getElementById('v-btn-reset').style.display = 'inline-flex';
                    document.getElementById('vpn-form').scrollIntoView({ behavior: 'smooth' });
                }

                function deleteVpn(index) {
                    if (confirm('정말 삭제하시겠습니까?')) {
                        v_products.splice(index, 1);
                        renderVpnProducts();
                    }
                }
                function resetVpnForm() {
                    document.getElementById('vpn-form').reset();
                    document.getElementById('v-edit-index').value = '';
                    document.getElementById('v-form-title').innerText = 'VPN 상품 등록';
                    document.getElementById('v-btn-submit').innerHTML = '<i class="fas fa-plus"></i> 상품 등록하기';
                    document.getElementById('v-btn-reset').style.display = 'none';
                }


                /* ================== Export Logic ================== */
                let currentExportType = '';
                function exportData(type) {
                    currentExportType = type;
                    let data, varName, fileName;

                    if (type === 'hosting') {
                        data = h_products;
                        varName = 'hostingProducts';
                        fileName = 'hosting_data.js';
                    } else if (type === 'vpn') {
                        data = v_products;
                        varName = 'vpnProducts';
                        fileName = 'vpn_data.js';
                    }

                    const json = JSON.stringify(data, null, 4);
                    const code = `/**\n * HUMECCA ${type.toUpperCase()} Data\n * Generated by Admin: ${new Date().toLocaleString()}\n */\n\nvar ${varName} = ${json};\n\nif (typeof localStorage !== 'undefined' && localStorage.getItem("${varName}")) {\n    try {\n        ${varName} = JSON.parse(localStorage.getItem("${varName}"));\n    } catch (e) {\n        console.error("Local data parsing error", e);\n    }\n}`;

                    document.getElementById('export-title').innerText = fileName + " 다운로드";
                    document.getElementById('export-filename').innerText = fileName;
                    document.getElementById('export-btn-text').innerText = fileName + " 다운로드";
                    document.getElementById('export-code').value = code;
                    document.getElementById('export-overlay').style.display = 'flex';
                }

                function downloadJS() {
                    const content = document.getElementById('export-code').value;
                    let fileName = 'data.js';
                    if (currentExportType === 'hosting') fileName = 'hosting_data.js';
                    if (currentExportType === 'vpn') fileName = 'vpn_data.js';

                    const blob = new Blob([content], { type: 'text/javascript' });
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = fileName;
                    a.click();
                    window.URL.revokeObjectURL(url);
                }


                /* ================== Init ================== */
                renderHostingProducts();
                renderVpnProducts();


                /* ================== Original Customer/Terms Logic ================== */
                function getCustomers() {
                    const data = localStorage.getItem('humecca_customers');
                    return data ? JSON.parse(data) : [];
                }

                function saveCustomers(customers) {
                    localStorage.setItem('humecca_customers', JSON.stringify(customers));
                }

                function showAlert(message, type = 'success') {
                    const alertContainer = document.getElementById(document.querySelector('.tab-content.active').id.includes('product') ? 'product-alert-container' : 'alert-container');
                    if (!alertContainer) return;
                    alertContainer.innerHTML = `
                <div class="alert alert-${type}">
                    <i class="fas fa-check-circle"></i> ${message}
                </div>
            `;
                    setTimeout(() => {
                        alertContainer.innerHTML = '';
                    }, 3000);
                }

                function renderCustomers() {
                    const customers = getCustomers();
                    const listContainer = document.getElementById('customer-list');
                    const countElement = document.getElementById('customer-count');
                    if (!listContainer) return;

                    countElement.textContent = customers.length;
                    if (customers.length === 0) {
                        listContainer.innerHTML = `
                    <div style="grid-column: 1/-1; padding:40px; text-align:center; color:#999;">
                        <i class="fas fa-building" style="font-size:40px; margin-bottom:10px;"></i>
                        <p>등록된 고객사가 없습니다.</p>
                    </div>`;
                        return;
                    }

                    listContainer.innerHTML = customers.map((customer, index) => `
                <div class="customer-card">
                    <button class="delete-btn" style="position:absolute; top:10px; right:10px;" onclick="deleteCustomer(${index})"><i class="fas fa-times"></i></button>
                    ${customer.logo ? `<img src="${customer.logo}" style="max-height:60px; margin-bottom:10px;">` : '<i class="fas fa-building" style="font-size:40px; margin-bottom:10px; color:#ddd;"></i>'}
                    <div style="font-weight:bold;">${customer.name}</div>
                    <button class="btn btn-secondary" style="width:100%; margin-top:10px; font-size:12px;" onclick="editCustomer(${index})">수정</button>
                </div>
            `).join('');
                }

                document.getElementById('customer-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const name = document.getElementById('customer-name').value.trim();
                    const logo = document.getElementById('customer-logo').value.trim();
                    const editIndex = document.getElementById('edit-index').value;
                    if (!name) return alert('고객사명을 입력해주세요.');
                    const customers = getCustomers();

                    if (editIndex !== '') {
                        customers[parseInt(editIndex)] = { name, logo: logo || '' };
                        showAlert(`${name}이(가) 수정되었습니다.`);
                    } else {
                        customers.push({ name, logo: logo || '' });
                        showAlert(`${name}이(가) 추가되었습니다.`);
                    }
                    saveCustomers(customers);
                    cancelEdit();
                    renderCustomers();
                });

                function deleteCustomer(index) {
                    if (!confirm('정말 삭제하시겠습니까?')) return;
                    const customers = getCustomers();
                    customers.splice(index, 1);
                    saveCustomers(customers);
                    renderCustomers();
                }

                function editCustomer(index) {
                    const customers = getCustomers();
                    const customer = customers[index];
                    document.getElementById('customer-name').value = customer.name;
                    document.getElementById('customer-logo').value = customer.logo || '';
                    document.getElementById('edit-index').value = index;
                    document.getElementById('form-title').textContent = '고객사 수정';
                    document.getElementById('submit-btn').innerHTML = '<i class="fas fa-save"></i> 저장';
                    document.getElementById('cancel-btn').style.display = 'block';
                }

                function cancelEdit() {
                    document.getElementById('customer-form').reset();
                    document.getElementById('edit-index').value = '';
                    document.getElementById('form-title').textContent = '고객사 추가';
                    document.getElementById('submit-btn').innerHTML = '<i class="fas fa-plus"></i> 추가';
                    document.getElementById('cancel-btn').style.display = 'none';
                }

                renderCustomers();

                /* Terms Logic Port */
                let currentTermType = 'privacy';
                function loadTermEditor(type) {
                    currentTermType = type;
                    document.querySelectorAll('#tab-terms .btn').forEach(btn => {
                        if (btn.id.startsWith('btn-')) btn.className = 'btn btn-secondary';
                    });
                    document.getElementById('btn-' + type).className = 'btn btn-primary';

                    let content = localStorage.getItem('humecca_term_v4_' + type);
                    if (content === null && typeof TERMS_DATA !== 'undefined') content = TERMS_DATA[type];
                    document.getElementById('term-content').value = content || '';
                }
                function saveCurrentTerm() {
                    const content = document.getElementById('term-content').value;
                    localStorage.setItem('humecca_term_v4_' + currentTermType, content);
                    alert('저장되었습니다.');
                }
                function resetTermToDefault() {
                    if (confirm('초기화하시겠습니까?') && typeof TERMS_DATA !== 'undefined') {
                        document.getElementById('term-content').value = TERMS_DATA[currentTermType];
                    }
                }

            </script>

            <!-- Supabase Integration -->
            <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
            <script src="./supabase_config.js"></script>
            <script>
                // ==================== Supabase 통합 관리 시스템 ====================

                // 카테고리 정의
                const CATEGORIES = {
                    'hosting': { category: 'idc', subcategory: 'hosting', name: '서버 호스팅' },
                    'vpn': { category: 'vpn', subcategory: 'vpn-service', name: 'VPN 전용선' },
                    'colocation': { category: 'idc', subcategory: 'colocation', name: '코로케이션' },
                    'service': { category: 'security', subcategory: 'addon', name: '부가서비스' }
                };

                // ==================== 상품(제품) 관리 ====================

                // 상품 조회 또는 생성
                async function getOrCreateProduct(type) {
                    if (!supabase) return null;

                    const config = CATEGORIES[type];
                    if (!config) return null;

                    try {
                        // 먼저 존재하는지 확인
                        const { data: existing, error: selectError } = await supabase
                            .from('products')
                            .select('*')
                            .eq('category', config.category)
                            .eq('subcategory', config.subcategory)
                            .single();

                        if (existing) return existing;

                        // 없으면 생성
                        const { data: newProduct, error: insertError } = await supabase
                            .from('products')
                            .insert([{
                                category: config.category,
                                subcategory: config.subcategory,
                                name: config.name,
                                slug: type,
                                active: true
                            }])
                            .select()
                            .single();

                        if (insertError) throw insertError;
                        return newProduct;
                    } catch (err) {
                        console.error('Error getting/creating product:', err);
                        return null;
                    }
                }

                // ==================== 플랜 관리 ====================

                // 플랜 추가
                async function addPlanToSupabase(type, planData) {
                    if (!supabase) {
                        alert('Supabase 연결이 초기화되지 않았습니다.');
                        return false;
                    }

                    try {
                        // 먼저 상품(제품) 확보
                        const product = await getOrCreateProduct(type);
                        if (!product) {
                            throw new Error('상품을 찾거나 생성할 수 없습니다.');
                        }

                        // 플랜 추가
                        const { data, error } = await supabase
                            .from('product_plans')
                            .insert([{
                                product_id: product.id,
                                plan_name: planData.name,
                                plan_id: planData.id,
                                price: planData.price,
                                period: planData.period,
                                badge: planData.badge,
                                summary: planData.summary,
                                cpu: planData.cpu,
                                ram: planData.ram,
                                storage: planData.storage,
                                traffic: planData.traffic,
                                speed: planData.speed,
                                sites: planData.sites,
                                users: planData.users,
                                features: planData.features ? planData.features.join('\n') : '',
                                os_options: planData.os_options,
                                license_info: planData.license_info,
                                active: planData.active !== false,
                                popular: planData.popular === true,
                                sort_order: parseInt(planData.order) || 1
                            }])
                            .select();

                        if (error) throw error;

                        showProductAlert(`✅ ${planData.name} 플랜이 Supabase에 등록되었습니다!`, 'success');
                        return true;
                    } catch (err) {
                        console.error('Error adding plan:', err);
                        showProductAlert('❌ 등록 실패: ' + err.message, 'error');
                        return false;
                    }
                }

                // 플랜 목록 조회
                async function loadPlansFromSupabase(type) {
                    if (!supabase) return [];

                    try {
                        const product = await getOrCreateProduct(type);
                        if (!product) return [];

                        const { data, error } = await supabase
                            .from('product_plans')
                            .select('*')
                            .eq('product_id', product.id)
                            .order('sort_order', { ascending: true });

                        if (error) throw error;
                        return data || [];
                    } catch (err) {
                        console.error('Error loading plans:', err);
                        return [];
                    }
                }

                // 플랜 삭제
                async function deletePlanFromSupabase(planId) {
                    if (!supabase) return false;

                    try {
                        const { error } = await supabase
                            .from('product_plans')
                            .delete()
                            .eq('id', planId);

                        if (error) throw error;
                        showProductAlert('플랜이 삭제되었습니다.', 'success');
                        return true;
                    } catch (err) {
                        console.error('Error deleting plan:', err);
                        showProductAlert('삭제 실패: ' + err.message, 'error');
                        return false;
                    }
                }

                // ==================== UI 헬퍼 ====================

                // 알림 메시지 표시
                function showProductAlert(message, type = 'success') {
                    const container = document.getElementById('product-alert-container');
                    if (!container) return;

                    const alertClass = type === 'success' ? 'alert-success' : 'alert-info';
                    container.innerHTML = `
                <div class="alert ${alertClass}">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;
                    setTimeout(() => container.innerHTML = '', 5000);
                }

                // ==================== 폼 통합 ====================

                // 호스팅 폼 제출
                const hostingForm = document.getElementById('hosting-form');
                if (hostingForm) {
                    hostingForm.addEventListener('submit', async (e) => {
                        e.preventDefault();

                        const planData = {
                            name: document.getElementById('h-name').value,
                            id: document.getElementById('h-id').value,
                            price: document.getElementById('h-price').value,
                            period: document.getElementById('h-period').value,
                            badge: document.getElementById('h-badge').value,
                            summary: document.getElementById('h-summary').value,
                            cpu: document.getElementById('h-cpu').value,
                            ram: document.getElementById('h-ram').value,
                            storage: document.getElementById('h-storage').value,
                            traffic: document.getElementById('h-traffic').value,
                            features: document.getElementById('h-features').value.split('\n').filter(f => f.trim()),
                            active: document.getElementById('h-active').checked,
                            popular: document.getElementById('h-popular').checked,
                            order: document.getElementById('h-order').value
                        };

                        const success = await addPlanToSupabase('hosting', planData);
                        if (success) {
                            hostingForm.reset();
                            // 목록 새로고침 (별도 구현 필요)
                            refreshHostingList();
                        }
                    });
                }

                // VPN 폼 제출
                const vpnForm = document.getElementById('vpn-form');
                if (vpnForm) {
                    vpnForm.addEventListener('submit', async (e) => {
                        e.preventDefault();

                        const planData = {
                            name: document.getElementById('v-name').value,
                            id: document.getElementById('v-id').value,
                            price: document.getElementById('v-price').value,
                            period: document.getElementById('v-period').value,
                            badge: document.getElementById('v-badge').value,
                            summary: document.getElementById('v-summary').value,
                            speed: document.getElementById('v-speed').value,
                            sites: document.getElementById('v-sites').value,
                            users: document.getElementById('v-users').value,
                            features: document.getElementById('v-features').value.split('\n').filter(f => f.trim()),
                            active: document.getElementById('v-active').checked,
                            popular: document.getElementById('v-popular').checked,
                            order: document.getElementById('v-order').value
                        };

                        const success = await addPlanToSupabase('vpn', planData);
                        if (success) {
                            vpnForm.reset();
                            refreshVpnList();
                        }
                    });
                }

                // 목록 새로고침 (기본 구현)
                async function refreshHostingList() {
                    const plans = await loadPlansFromSupabase('hosting');
                    console.log('호스팅 플랜 목록:', plans);
                    // 실제 UI 업데이트는 기존 코드 활용
                }

                async function refreshVpnList() {
                    const plans = await loadPlansFromSupabase('vpn');
                    console.log('VPN 플랜 목록:', plans);
                }

                // ==================== 데이터 마이그레이션 ====================

                async function migrateToSupabase() {
                    if (!supabase) {
                        alert('Supabase가 초기화되지 않았습니다.');
                        return;
                    }

                    if (!confirm('LocalStorage의 기존 데이터를 Supabase로 이전하시겠습니까?\n이미 Supabase에 같은 데이터가 있으면 중복될 수 있습니다.')) {
                        return;
                    }

                    showProductAlert('⏳ 데이터 이전 중...', 'info');

                    try {
                        let totalMigrated = 0;

                        // 호스팅 데이터 이전
                        if (typeof h_products !== 'undefined' && h_products.length > 0) {
                            for (const product of h_products) {
                                const planData = {
                                    name: product.name,
                                    id: product.id,
                                    price: product.price,
                                    period: product.period,
                                    badge: product.badge,
                                    summary: product.summary,
                                    cpu: product.specs?.cpu,
                                    ram: product.specs?.ram,
                                    storage: product.specs?.storage,
                                    traffic: product.specs?.bandwidth,
                                    features: product.features || [],
                                    active: product.isActive !== false,
                                    popular: product.popular === true,
                                    order: product.sortOrder || 1
                                };

                                const success = await addPlanToSupabase('hosting', planData);
                                if (success) totalMigrated++;
                            }
                        }

                        // VPN 데이터 이전
                        if (typeof v_products !== 'undefined' && v_products.length > 0) {
                            for (const product of v_products) {
                                const planData = {
                                    name: product.name,
                                    id: product.id,
                                    price: product.price,
                                    period: product.period,
                                    badge: product.badge,
                                    summary: product.summary,
                                    speed: product.specs?.speed,
                                    sites: product.specs?.sites,
                                    users: product.specs?.users,
                                    features: product.features || [],
                                    active: product.isActive !== false,
                                    popular: product.popular === true,
                                    order: product.sortOrder || 1
                                };

                                const success = await addPlanToSupabase('vpn', planData);
                                if (success) totalMigrated++;
                            }
                        }

                        showProductAlert(`✅ 총 ${totalMigrated}개의 상품이 Supabase로 이전되었습니다!`, 'success');

                        // 목록 새로고침
                        setTimeout(() => {
                            refreshHostingList();
                            refreshVpnList();
                        }, 1000);

                    } catch (error) {
                        console.error('Migration error:', error);
                        showProductAlert('❌ 데이터 이전 중 오류가 발생했습니다: ' + error.message, 'error');
                    }
                }

                // ==================== 연혁 관리 ====================

                // 연혁 목록 불러오기
                async function refreshHistoryList() {
                    if (!supabase) return;

                    try {
                        const { data, error } = await supabase
                            .from('company_history')
                            .select('*')
                            .order('year', { ascending: false })
                            .order('month', { ascending: false })
                            .order('sort_order', { ascending: true });

                        if (error) throw error;

                        const historyList = document.getElementById('history-list');
                        const historyCount = document.getElementById('history-count');

                        if (!data || data.length === 0) {
                            historyList.innerHTML = `
                        <div style="text-align: center; padding: 60px; color: #999;">
                            <i class="fas fa-calendar-alt" style="font-size: 3rem; margin-bottom: 15px; color: #ddd;"></i>
                            <p>등록된 연혁이 없습니다.</p>
                        </div>
                    `;
                            historyCount.textContent = '0';
                            return;
                        }

                        historyCount.textContent = data.length;

                        // 연도별로 그룹화
                        const groupedByYear = {};
                        data.forEach(item => {
                            if (!groupedByYear[item.year]) {
                                groupedByYear[item.year] = [];
                            }
                            groupedByYear[item.year].push(item);
                        });

                        let html = '';
                        Object.keys(groupedByYear).sort((a, b) => b - a).forEach(year => {
                            html += `
                        <div style="margin-bottom: 30px;">
                            <h3 style="font-size: 1.5rem; color: #EF4444; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #EF4444;">
                                ${year}
                            </h3>
                            <div style="display: grid; gap: 15px;">
                    `;

                            groupedByYear[year].forEach(item => {
                                const monthText = item.month ? `${item.month.toString().padStart(2, '0')}월` : '';
                                html += `
                            <div style="background: ${item.active ? '#fff' : '#f5f5f5'}; padding: 20px; border-radius: 8px; border-left: 4px solid #EF4444; position: relative;">
                                <div style="position: absolute; top: 15px; right: 15px; display: flex; gap: 10px;">
                                    <button onclick="editHistory(${item.id})" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9rem;">
                                        <i class="fas fa-edit"></i> 수정
                                    </button>
                                    <button onclick="deleteHistory(${item.id})" class="btn btn-danger" style="padding: 8px 12px; font-size: 0.9rem;">
                                        <i class="fas fa-trash"></i> 삭제
                                    </button>
                                </div>
                                <div style="padding-right: 180px;">
                                    <div style="color: #999; font-size: 0.9rem; margin-bottom: 5px;">${year}.${monthText}</div>
                                    <h4 style="font-size: 1.1rem; margin-bottom: 8px; color: #333;">${item.title}</h4>
                                    ${item.description ? `<p style="color: #666; line-height: 1.6;">${item.description}</p>` : ''}
                                    ${!item.active ? '<span style="color: #EF4444; font-size: 0.85rem;">비활성</span>' : ''}
                                </div>
                            </div>
                        `;
                            });

                            html += '</div></div>';
                        });

                        historyList.innerHTML = html;

                    } catch (error) {
                        console.error('Error loading history:', error);
                        showHistoryAlert('❌ 연혁 불러오기 실패: ' + error.message, 'error');
                    }
                }

                // 연혁 추가/수정
                document.getElementById('history-form')?.addEventListener('submit', async (e) => {
                    e.preventDefault();

                    if (!supabase) {
                        alert('Supabase 연결이 초기화되지 않았습니다.');
                        return;
                    }

                    const editId = document.getElementById('history-edit-id').value;
                    const historyData = {
                        year: parseInt(document.getElementById('history-year').value),
                        month: document.getElementById('history-month').value ? parseInt(document.getElementById('history-month').value) : null,
                        title: document.getElementById('history-title').value,
                        description: document.getElementById('history-description').value || null,
                        sort_order: parseInt(document.getElementById('history-sort').value) || 1,
                        active: document.getElementById('history-active').checked
                    };

                    try {
                        if (editId) {
                            // 수정
                            const { error } = await supabase
                                .from('company_history')
                                .update(historyData)
                                .eq('id', editId);

                            if (error) throw error;
                            showHistoryAlert('✅ 연혁이 수정되었습니다!', 'success');
                        } else {
                            // 추가
                            const { error } = await supabase
                                .from('company_history')
                                .insert([historyData]);

                            if (error) throw error;
                            showHistoryAlert('✅ 연혁이 추가되었습니다!', 'success');
                        }

                        resetHistoryForm();
                        refreshHistoryList();
                    } catch (error) {
                        console.error('Error saving history:', error);
                        showHistoryAlert('❌ 저장 실패: ' + error.message, 'error');
                    }
                });

                // 연혁 수정
                async function editHistory(id) {
                    if (!supabase) return;

                    try {
                        const { data, error } = await supabase
                            .from('company_history')
                            .select('*')
                            .eq('id', id)
                            .single();

                        if (error) throw error;

                        document.getElementById('history-edit-id').value = data.id;
                        document.getElementById('history-year').value = data.year;
                        document.getElementById('history-month').value = data.month || '';
                        document.getElementById('history-title').value = data.title;
                        document.getElementById('history-description').value = data.description || '';
                        document.getElementById('history-sort').value = data.sort_order || 1;
                        document.getElementById('history-active').checked = data.active;

                        document.getElementById('history-form-title').textContent = '연혁 수정';
                        document.getElementById('history-submit-btn').innerHTML = '<i class="fas fa-save"></i> 저장';
                        document.getElementById('history-cancel-btn').style.display = 'inline-block';

                        document.getElementById('history-form').scrollIntoView({ behavior: 'smooth' });
                    } catch (error) {
                        console.error('Error loading history:', error);
                        showHistoryAlert('❌ 불러오기 실패: ' + error.message, 'error');
                    }
                }

                // 연혁 삭제
                async function deleteHistory(id) {
                    if (!confirm('정말 이 연혁을 삭제하시겠습니까?')) return;

                    if (!supabase) return;

                    try {
                        const { error } = await supabase
                            .from('company_history')
                            .delete()
                            .eq('id', id);

                        if (error) throw error;

                        showHistoryAlert('✅ 연혁이 삭제되었습니다.', 'success');
                        refreshHistoryList();
                    } catch (error) {
                        console.error('Error deleting history:', error);
                        showHistoryAlert('❌ 삭제 실패: ' + error.message, 'error');
                    }
                }

                // 연혁 폼 초기화
                function resetHistoryForm() {
                    document.getElementById('history-form').reset();
                    document.getElementById('history-edit-id').value = '';
                    document.getElementById('history-form-title').textContent = '연혁 추가';
                    document.getElementById('history-submit-btn').innerHTML = '<i class="fas fa-plus"></i> 추가';
                    document.getElementById('history-cancel-btn').style.display = 'none';
                }

                // 연혁 알림
                function showHistoryAlert(message, type = 'success') {
                    const container = document.getElementById('history-alert-container');
                    if (!container) return;

                    const alertClass = type === 'success' ? 'alert-success' : 'alert-info';
                    container.innerHTML = `
                <div class="alert ${alertClass}">
                        const { data, error } = await supabase
                            .from('company_history')
                            .select('*')
                            .order('year', { ascending: false })
                            .order('month', { ascending: false })
                            .order('sort_order', { ascending: true });

                        if (error) throw error;

                        const historyList = document.getElementById('history-list');
                        const historyCount = document.getElementById('history-count');

                        if (!data || data.length === 0) {
                            historyList.innerHTML = `
                        < div style = "text-align: center; padding: 60px; color: #999;" >
                            <i class="fas fa-calendar-alt" style="font-size: 3rem; margin-bottom: 15px; color: #ddd;"></i>
                            <p>등록된 연혁이 없습니다.</p>
                        </div >
                        `;
                            historyCount.textContent = '0';
                            return;
                        }

                        historyCount.textContent = data.length;

                        // 연도별로 그룹화
                        const groupedByYear = {};
                        data.forEach(item => {
                            if (!groupedByYear[item.year]) {
                                groupedByYear[item.year] = [];
                            }
                            groupedByYear[item.year].push(item);
                        });

                        let html = '';
                        Object.keys(groupedByYear).sort((a, b) => b - a).forEach(year => {
                            html += `
                        < div style = "margin-bottom: 30px;" >
                            <h3 style="font-size: 1.5rem; color: #EF4444; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #EF4444;">
                                ${year}
                            </h3>
                            <div style="display: grid; gap: 15px;">
                    `;

                            groupedByYear[year].forEach(item => {
                                const monthText = item.month ? `${item.month.toString().padStart(2, '0')}월` : '';
                                html += `
                            <div style="background: ${item.active ? '#fff' : '#f5f5f5'}; padding: 20px; border-radius: 8px; border-left: 4px solid #EF4444; position: relative;">
                                <div style="position: absolute; top: 15px; right: 15px; display: flex; gap: 10px;">
                                    <button onclick="editHistory(${item.id})" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9rem;">
                                        <i class="fas fa-edit"></i> 수정
                                    </button>
                                    <button onclick="deleteHistory(${item.id})" class="btn btn-danger" style="padding: 8px 12px; font-size: 0.9rem;">
                                        <i class="fas fa-trash"></i> 삭제
                                    </button>
                                </div>
                                <div style="padding-right: 180px;">
                                    <div style="color: #999; font-size: 0.9rem; margin-bottom: 5px;">${year}.${monthText}</div>
                                    <h4 style="font-size: 1.1rem; margin-bottom: 8px; color: #333;">${item.title}</h4>
                                    ${item.description ? `<p style="color: #666; line-height: 1.6;">${item.description}</p>` : ''}
                                    ${!item.active ? '<span style="color: #EF4444; font-size: 0.85rem;">비활성</span>' : ''}
                                </div>
                            </div>
                        `;
                            });

                            html += '</div></div > ';
                });

                historyList.innerHTML = html;

                    } catch (error) {
                    console.error('Error loading history:', error);
                    showHistoryAlert('❌ 연혁 불러오기 실패: ' + error.message, 'error');
                }
                }

                // 연혁 추가/수정
                document.getElementById('history-form')?.addEventListener('submit', async (e) => {
                    e.preventDefault();

                    if (!supabase) {
                        alert('Supabase 연결이 초기화되지 않았습니다.');
                        return;
                    }

                    const editId = document.getElementById('history-edit-id').value;
                    const historyData = {
                        year: parseInt(document.getElementById('history-year').value),
                        month: document.getElementById('history-month').value ? parseInt(document.getElementById('history-month').value) : null,
                        title: document.getElementById('history-title').value,
                        description: document.getElementById('history-description').value || null,
                        sort_order: parseInt(document.getElementById('history-sort').value) || 1,
                        active: document.getElementById('history-active').checked
                    };

                    try {
                        if (editId) {
                            // 수정
                            const { error } = await supabase
                                .from('company_history')
                                .update(historyData)
                                .eq('id', editId);

                            if (error) throw error;
                            showHistoryAlert('✅ 연혁이 수정되었습니다!', 'success');
                        } else {
                            // 추가
                            const { error } = await supabase
                                .from('company_history')
                                .insert([historyData]);

                            if (error) throw error;
                            showHistoryAlert('✅ 연혁이 추가되었습니다!', 'success');
                        }

                        resetHistoryForm();
                        refreshHistoryList();
                    } catch (error) {
                        console.error('Error saving history:', error);
                        showHistoryAlert('❌ 저장 실패: ' + error.message, 'error');
                    }
                });

                // 연혁 수정
                async function editHistory(id) {
                    if (!supabase) return;

                    try {
                        const { data, error } = await supabase
                            .from('company_history')
                            .select('*')
                            .eq('id', id)
                            .single();

                        if (error) throw error;

                        document.getElementById('history-edit-id').value = data.id;
                        document.getElementById('history-year').value = data.year;
                        document.getElementById('history-month').value = data.month || '';
                        document.getElementById('history-title').value = data.title;
                        document.getElementById('history-description').value = data.description || '';
                        document.getElementById('history-sort').value = data.sort_order || 1;
                        document.getElementById('history-active').checked = data.active;

                        document.getElementById('history-form-title').textContent = '연혁 수정';
                        document.getElementById('history-submit-btn').innerHTML = '<i class="fas fa-save"></i> 저장';
                        document.getElementById('history-cancel-btn').style.display = 'inline-block';

                        document.getElementById('history-form').scrollIntoView({ behavior: 'smooth' });
                    } catch (error) {
                        console.error('Error loading history:', error);
                        showHistoryAlert('❌ 불러오기 실패: ' + error.message, 'error');
                    }
                }

                // 연혁 삭제
                async function deleteHistory(id) {
                    if (!confirm('정말 이 연혁을 삭제하시겠습니까?')) return;

                    if (!supabase) return;

                    try {
                        const { error } = await supabase
                            .from('company_history')
                            .delete()
                            .eq('id', id);

                        if (error) throw error;

                        showHistoryAlert('✅ 연혁이 삭제되었습니다.', 'success');
                        refreshHistoryList();
                    } catch (error) {
                        console.error('Error deleting history:', error);
                        showHistoryAlert('❌ 삭제 실패: ' + error.message, 'error');
                    }
                }

                // 연혁 폼 초기화
                function resetHistoryForm() {
                    document.getElementById('history-form').reset();
                    document.getElementById('history-edit-id').value = '';
                    document.getElementById('history-form-title').textContent = '연혁 추가';
                    document.getElementById('history-submit-btn').innerHTML = '<i class="fas fa-plus"></i> 추가';
                    document.getElementById('history-cancel-btn').style.display = 'none';
                }

                // 연혁 알림
                function showHistoryAlert(message, type = 'success') {
                    const container = document.getElementById('history-alert-container');
                    if (!container) return;

                    const alertClass = type === 'success' ? 'alert-success' : 'alert-info';
                    container.innerHTML = `
                <div class="alert ${alertClass}">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;
                    setTimeout(() => container.innerHTML = '', 5000);
                }

                // ==================== FAQ 관리 ====================

                async function refreshFaqList() {
                    if (!supabase) return;

                    try {
                        const { data, error } = await supabase
                            .from('faqs')
                            .select('*')
                            .order('category', { ascending: true })
                            .order('sort_order', { ascending: true });

                        if (error) throw error;

                        const faqList = document.getElementById('faq-list');
                        const faqCount = document.getElementById('faq-count');

                        if (!data || data.length === 0) {
                            faqList.innerHTML = '<div style="text-align: center; padding: 60px; color: #999;"><i class="fas fa-question-circle" style="font-size: 3rem; margin-bottom: 15px; color: #ddd;"></i><p>등록된 FAQ가 없습니다.</p></div>';
                            faqCount.textContent = '0';
                            return;
                        }

                        faqCount.textContent = data.length;

                        const categories = { general: '일반', technical: '기술', billing: '요금', service: '서비스' };
                        let html = '';

                        Object.keys(categories).forEach(cat => {
                            const items = data.filter(f => f.category === cat);
                            if (items.length > 0) {
                                html += `<div style="margin-bottom: 30px;"><h3 style="font-size: 1.3rem; color: #333; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #EF4444;">${categories[cat]}</h3>`;
                                items.forEach(item => {
                                    html += `
                                <div style="background: ${item.active ? '#fff' : '#f5f5f5'}; padding: 20px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #3b82f6;">
                                    <div style="display: flex; justify-content: space-between; align-items: start;">
                                        <div style="flex: 1;">
                                            <h4 style="font-size: 1.1rem; margin-bottom: 10px; color: #333;">Q. ${item.question}</h4>
                                            <p style="color: #666; line-height: 1.6; margin-bottom: 10px;">A. ${item.answer}</p>
                                            <small style="color: #999;">조회수: ${item.views || 0} | ${!item.active ? '<span style="color: #EF4444;">비활성</span>' : ''}</small>
                                        </div>
                                        <div style="display: flex; gap: 10px; margin-left: 20px;">
                                            <button onclick="editFaq(${item.id})" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9rem;"><i class="fas fa-edit"></i></button>
                                            <button onclick="deleteFaq(${item.id})" class="btn btn-danger" style="padding: 8px 12px; font-size: 0.9rem;"><i class="fas fa-trash"></i></button>
                                        </div>
                                    </div>
                                </div>
                            `;
                                });
                                html += '</div>';
                            }
                        });

                        faqList.innerHTML = html;
                    } catch (error) {
                        console.error('Error loading FAQ:', error);
                        showFaqAlert('❌ FAQ 불러오기 실패: ' + error.message, 'error');
                    }
                }

                document.getElementById('faq-form')?.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    if (!supabase) return;

                    const editId = document.getElementById('faq-edit-id').value;
                    const faqData = {
                        category: document.getElementById('faq-category').value,
                        question: document.getElementById('faq-question').value,
                        answer: document.getElementById('faq-answer').value,
                        sort_order: parseInt(document.getElementById('faq-sort').value) || 1,
                        active: document.getElementById('faq-active').checked
                    };

                    try {
                        if (editId) {
                            const { error } = await supabase.from('faqs').update(faqData).eq('id', editId);
                            if (error) throw error;
                            showFaqAlert('✅ FAQ가 수정되었습니다!', 'success');
                        } else {
                            const { error } = await supabase.from('faqs').insert([faqData]);
                            if (error) throw error;
                            showFaqAlert('✅ FAQ가 추가되었습니다!', 'success');
                        }
                        resetFaqForm();
                        refreshFaqList();
                    } catch (error) {
                        showFaqAlert('❌ 저장 실패: ' + error.message, 'error');
                    }
                });

                async function editFaq(id) {
                    if (!supabase) return;
                    try {
                        const { data, error } = await supabase.from('faqs').select('*').eq('id', id).single();
                        if (error) throw error;

                        document.getElementById('faq-edit-id').value = data.id;
                        document.getElementById('faq-category').value = data.category;
                        document.getElementById('faq-question').value = data.question;
                        document.getElementById('faq-answer').value = data.answer;
                        document.getElementById('faq-sort').value = data.sort_order || 1;
                        document.getElementById('faq-active').checked = data.active;

                        document.getElementById('faq-form-title').textContent = 'FAQ 수정';
                        document.getElementById('faq-submit-btn').innerHTML = '<i class="fas fa-save"></i> 저장';
                        document.getElementById('faq-cancel-btn').style.display = 'inline-block';
                        document.getElementById('faq-form').scrollIntoView({ behavior: 'smooth' });
                    } catch (error) {
                        showFaqAlert('❌ 불러오기 실패: ' + error.message, 'error');
                    }
                }

                async function deleteFaq(id) {
                    if (!confirm('정말 이 FAQ를 삭제하시겠습니까?')) return;
                    if (!supabase) return;

                    try {
                        const { error } = await supabase.from('faqs').delete().eq('id', id);
                        if (error) throw error;
                        showFaqAlert('✅ FAQ가 삭제되었습니다.', 'success');
                        refreshFaqList();
                    } catch (error) {
                        showFaqAlert('❌ 삭제 실패: ' + error.message, 'error');
                    }
                }

                function resetFaqForm() {
                    document.getElementById('faq-form').reset();
                    document.getElementById('faq-edit-id').value = '';
                    document.getElementById('faq-form-title').textContent = 'FAQ 추가';
                    document.getElementById('faq-submit-btn').innerHTML = '<i class="fas fa-plus"></i> 추가';
                    document.getElementById('faq-cancel-btn').style.display = 'none';
                }

                function showFaqAlert(message, type = 'success') {
                    const container = document.getElementById('faq-alert-container');
                    if (!container) return;
                    const alertClass = type === 'success' ? 'alert-success' : 'alert-info';
                    container.innerHTML = `<div class="alert ${alertClass}"><i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i><span>${message}</span></div>`;
                    setTimeout(() => container.innerHTML = '', 5000);
                }

                // ==================== 공지사항 관리 ====================

                async function refreshNoticeList() {
                    if (!supabase) return;

                    try {
                        const { data, error } = await supabase
                            .from('notices')
                            .select('*')
                            .order('is_pinned', { ascending: false })
                            .order('created_at', { ascending: false });

                        if (error) throw error;

                        const noticeList = document.getElementById('notice-list');
                        const noticeCount = document.getElementById('notice-count');

                        if (!data || data.length === 0) {
                            noticeList.innerHTML = '<div style="text-align: center; padding: 60px; color: #999;"><i class="fas fa-bullhorn" style="font-size: 3rem; margin-bottom: 15px; color: #ddd;"></i><p>등록된 공지사항이 없습니다.</p></div>';
                            noticeCount.textContent = '0';
                            return;
                        }

                        noticeCount.textContent = data.length;

                        let html = '';
                        data.forEach(item => {
                            const date = new Date(item.created_at).toLocaleDateString('ko-KR');
                            html += `
                        <div style="background: ${item.active ? '#fff' : '#f5f5f5'}; padding: 20px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid ${item.is_pinned ? '#EF4444' : '#3b82f6'};">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    ${item.is_pinned ? '<span style="background: #EF4444; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; margin-right: 10px;">고정</span>' : ''}
                                    <h4 style="font-size: 1.2rem; margin-bottom: 10px; color: #333; display: inline;">${item.title}</h4>
                                    <p style="color: #666; line-height: 1.6; margin: 10px 0;">${item.content.substring(0, 150)}${item.content.length > 150 ? '...' : ''}</p>
                                    <small style="color: #999;">${item.author} | ${date} | 조회수: ${item.views || 0} ${!item.active ? '| <span style="color: #EF4444;">비활성</span>' : ''}</small>
                                </div>
                                <div style="display: flex; gap: 10px; margin-left: 20px;">
                                    <button onclick="editNotice(${item.id})" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9rem;"><i class="fas fa-edit"></i></button>
                                    <button onclick="deleteNotice(${item.id})" class="btn btn-danger" style="padding: 8px 12px; font-size: 0.9rem;"><i class="fas fa-trash"></i></button>
                                </div>
                            </div>
                        </div>
                    `;
                        });

                        noticeList.innerHTML = html;
                    } catch (error) {
                        console.error('Error loading notices:', error);
                        showNoticeAlert('❌ 공지사항 불러오기 실패: ' + error.message, 'error');
                    }
                }

                document.getElementById('notice-form')?.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    if (!supabase) return;

                    const editId = document.getElementById('notice-edit-id').value;
                    const noticeData = {
                        title: document.getElementById('notice-title').value,
                        content: document.getElementById('notice-content').value,
                        author: document.getElementById('notice-author').value || 'HUMECCA',
                        is_pinned: document.getElementById('notice-pinned').checked,
                        active: document.getElementById('notice-active').checked
                    };

                    try {
                        if (editId) {
                            const { error } = await supabase.from('notices').update(noticeData).eq('id', editId);
                            if (error) throw error;
                            showNoticeAlert('✅ 공지사항이 수정되었습니다!', 'success');
                        } else {
                            const { error } = await supabase.from('notices').insert([noticeData]);
                            if (error) throw error;
                            showNoticeAlert('✅ 공지사항이 작성되었습니다!', 'success');
                        }
                        resetNoticeForm();
                        refreshNoticeList();
                    } catch (error) {
                        showNoticeAlert('❌ 저장 실패: ' + error.message, 'error');
                    }
                });

                async function editNotice(id) {
                    if (!supabase) return;
                    try {
                        const { data, error } = await supabase.from('notices').select('*').eq('id', id).single();
                        if (error) throw error;

                        document.getElementById('notice-edit-id').value = data.id;
                        document.getElementById('notice-title').value = data.title;
                        document.getElementById('notice-content').value = data.content;
                        document.getElementById('notice-author').value = data.author || 'HUMECCA';
                        document.getElementById('notice-pinned').checked = data.is_pinned;
                        document.getElementById('notice-active').checked = data.active;

                        document.getElementById('notice-form-title').textContent = '공지사항 수정';
                        document.getElementById('notice-submit-btn').innerHTML = '<i class="fas fa-save"></i> 저장';
                        document.getElementById('notice-cancel-btn').style.display = 'inline-block';
                        document.getElementById('notice-form').scrollIntoView({ behavior: 'smooth' });
                    } catch (error) {
                        showNoticeAlert('❌ 불러오기 실패: ' + error.message, 'error');
                    }
                }

                async function deleteNotice(id) {
                    if (!confirm('정말 이 공지사항을 삭제하시겠습니까?')) return;
                    if (!supabase) return;

                    try {
                        const { error } = await supabase.from('notices').delete().eq('id', id);
                        if (error) throw error;
                        showNoticeAlert('✅ 공지사항이 삭제되었습니다.', 'success');
                        refreshNoticeList();
                    } catch (error) {
                        showNoticeAlert('❌ 삭제 실패: ' + error.message, 'error');
                    }
                }

                function resetNoticeForm() {
                    document.getElementById('notice-form').reset();
                    document.getElementById('notice-edit-id').value = '';
                    document.getElementById('notice-author').value = 'HUMECCA';
                    document.getElementById('notice-form-title').textContent = '공지사항 작성';
                    document.getElementById('notice-submit-btn').innerHTML = '<i class="fas fa-plus"></i> 작성';
                    document.getElementById('notice-cancel-btn').style.display = 'none';
                }

                function showNoticeAlert(message, type = 'success') {
                    const container = document.getElementById('notice-alert-container');
                    if (!container) return;
                    const alertClass = type === 'success' ? 'alert-success' : 'alert-info';
                    container.innerHTML = `<div class="alert ${alertClass}"><i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i><span>${message}</span></div>`;
                    setTimeout(() => container.innerHTML = '', 5000);
                }

                // ==================== 문의 관리 ====================

                async function refreshInquiryList() {
                    if (!supabase) return;

                    try {
                        const filter = document.getElementById('inquiry-filter').value;
                        let query = supabase.from('inquiries').select('*').order('created_at', { ascending: false });

                        if (filter !== 'all') {
                            query = query.eq('status', filter);
                        }

                        const { data, error } = await query;
                        if (error) throw error;

                        const inquiryList = document.getElementById('inquiry-list');
                        const inquiryCount = document.getElementById('inquiry-count');

                        if (!data || data.length === 0) {
                            inquiryList.innerHTML = '<div style="text-align: center; padding: 60px; color: #999;"><i class="fas fa-envelope" style="font-size: 3rem; margin-bottom: 15px; color: #ddd;"></i><p>문의가 없습니다.</p></div>';
                            inquiryCount.textContent = '0';
                            return;
                        }

                        inquiryCount.textContent = data.length;

                        let html = '';
                        data.forEach(item => {
                            const date = new Date(item.created_at).toLocaleDateString('ko-KR');
                            const statusColors = { pending: '#f59e0b', replied: '#10b981', closed: '#6b7280' };
                            const statusNames = { pending: '답변 대기', replied: '답변 완료', closed: '종료' };

                            html += `
                        <div style="background: ${item.is_read ? '#f8f9fa' : '#fff'}; padding: 20px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid ${statusColors[item.status] || '#999'}; position: relative;">
                            ${!item.is_read ? '<span style="position: absolute; top: 10px; right: 10px; background: #EF4444; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem;">NEW</span>' : ''}
                            <div style="margin-bottom: 15px;">
                                <span style="background: ${statusColors[item.status]}; color: white; padding: 4px 10px; border-radius: 4px; font-size: 0.85rem; margin-right: 10px;">${statusNames[item.status]}</span>
                                <strong style="font-size: 1.1rem;">${item.subject}</strong>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; color: #666;">
                                <div><i class="fas fa-user"></i> ${item.name}</div>
                                <div><i class="fas fa-envelope"></i> ${item.email}</div>
                                <div><i class="fas fa-phone"></i> ${item.phone || 'N/A'}</div>
                                <div><i class="fas fa-calendar"></i> ${date}</div>
                            </div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-bottom: 15px;">
                                <strong>문의 내용:</strong>
                                <p style="margin: 10px 0 0 0; line-height: 1.6;">${item.message}</p>
                            </div>
                            ${item.reply ? `
                                <div style="background: #e0f2fe; padding: 15px; border-radius: 6px; margin-bottom: 15px;">
                                    <strong>답변:</strong>
                                    <p style="margin: 10px 0 0 0; line-height: 1.6;">${item.reply}</p>
                                    <small style="color: #666;">답변일: ${new Date(item.replied_at).toLocaleDateString('ko-KR')}</small>
                                </div>
                            ` : ''}
                            <div style="display: flex; gap: 10px;">
                                <button onclick="replyInquiry(${item.id})" class="btn btn-primary" style="padding: 8px 16px; font-size: 0.9rem;">
                                    <i class="fas fa-reply"></i> ${item.reply ? '답변 수정' : '답변하기'}
                                </button>
                                <button onclick="updateInquiryStatus(${item.id}, 'closed')" class="btn btn-secondary" style="padding: 8px 16px; font-size: 0.9rem;">
                                    <i class="fas fa-check"></i> 종료
                                </button>
                                <button onclick="deleteInquiry(${item.id})" class="btn btn-danger" style="padding: 8px 16px; font-size: 0.9rem;">
                                    <i class="fas fa-trash"></i> 삭제
                                </button>
                            </div>
                        </div>
                    `;
                        });

                        inquiryList.innerHTML = html;
                    } catch (error) {
                        console.error('Error loading inquiries:', error);
                        showInquiryAlert('❌ 문의 불러오기 실패: ' + error.message, 'error');
                    }
                }

                async function replyInquiry(id) {
                    if (!supabase) return;

                    try {
                        const { data, error } = await supabase.from('inquiries').select('*').eq('id', id).single();
                        if (error) throw error;

                        const reply = prompt('답변을 입력하세요:', data.reply || '');
                        if (reply === null) return;

                        const { error: updateError } = await supabase
                            .from('inquiries')
                            .update({
                                reply: reply,
                                status: 'replied',
                                replied_at: new Date().toISOString(),
                                is_read: true
                            })
                            .eq('id', id);

                        if (updateError) throw updateError;

                        showInquiryAlert('✅ 답변이 등록되었습니다!', 'success');
                        refreshInquiryList();
                    } catch (error) {
                        showInquiryAlert('❌ 답변 등록 실패: ' + error.message, 'error');
                    }
                }

                async function updateInquiryStatus(id, status) {
                    if (!supabase) return;

                    try {
                        const { error } = await supabase
                            .from('inquiries')
                            .update({ status: status, is_read: true })
                            .eq('id', id);

                        if (error) throw error;

                        showInquiryAlert('✅ 상태가 변경되었습니다!', 'success');
                        refreshInquiryList();
                    } catch (error) {
                        showInquiryAlert('❌ 상태 변경 실패: ' + error.message, 'error');
                    }
                }

                async function deleteInquiry(id) {
                    if (!confirm('정말 이 문의를 삭제하시겠습니까?')) return;
                    if (!supabase) return;

                    try {
                        const { error } = await supabase.from('inquiries').delete().eq('id', id);
                        if (error) throw error;
                        showInquiryAlert('✅ 문의가 삭제되었습니다.', 'success');
                        refreshInquiryList();
                    } catch (error) {
                        showInquiryAlert('❌ 삭제 실패: ' + error.message, 'error');
                    }
                }

                function showInquiryAlert(message, type = 'success') {
                    const container = document.getElementById('inquiry-alert-container');
                    if (!container) return;
                    const alertClass = type === 'success' ? 'alert-success' : 'alert-info';
                    container.innerHTML = `<div class="alert ${alertClass}"><i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i><span>${message}</span></div>`;
                    setTimeout(() => container.innerHTML = '', 5000);
                }

                console.log('✅ Supabase 2-Table 시스템 초기화 완료');
            </script>
</body>

</html>
